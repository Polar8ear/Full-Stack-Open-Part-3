(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(16),o=n.n(a),u=n(17),i=n(3),s=n(5),l=n.n(s),d="/api/persons",j={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},update:function(e){return l.a.post(d,e).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e))},changePhoneNum:function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),f=function(e){var t=e.filter,n=e.setFilter;return Object(b.jsx)("form",{children:Object(b.jsxs)("div",{children:["filter: ",Object(b.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})})},m=function(e){e.persons,e.setPersons;var t=e.newName,n=e.setNewName,r=e.newNumber,c=e.setNewNumber,a=e.handleSubmit;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsxs)("form",{onSubmit:a,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:r,onChange:function(e){return c(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})},h=function(e){var t=e.persons,n=e.filter,r=e.handleDelete,c=n?t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})):t;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Number"}),c.map((function(e){return Object(b.jsxs)("div",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(t){return r(t,e)},children:"Delete"})]},e.name)}))]})},p=function(e){var t=e.notification;return null===t?null:Object(b.jsx)("div",{className:"message ".concat(t.status),children:t.message})},O=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(i.a)(a,2),s=o[0],l=o[1],d=Object(r.useState)(""),O=Object(i.a)(d,2),v=O[0],x=O[1],g=Object(r.useState)(""),w=Object(i.a)(g,2),N=w[0],C=w[1],S=Object(r.useState)(null),k=Object(i.a)(S,2),U=k[0],y=k[1];Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(p,{notification:U}),Object(b.jsx)(f,{filter:N,setFilter:C}),Object(b.jsx)(m,{persons:n,setPersons:c,newName:s,setNewName:l,newNumber:v,setNewNumber:x,handleSubmit:function(e){e.preventDefault();var t={name:s,number:v};if(l(""),x(""),n.some((function(e){return t.name.toUpperCase()===e.name.toUpperCase()}))){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one?"))){var r=n.findIndex((function(e){return e.name.toUpperCase()===s.toUpperCase()})),a=Object(u.a)(n);j.changePhoneNum(n[r].id,t).then((function(e){a[r]=e,c(a),y({status:"confirmation",message:"Changed ".concat(t.name,"'s number")}),setTimeout((function(){return y(null)}),3e3)})).catch((function(){y({status:"error",message:"Information of ".concat(t.name," has already been removed from the server")}),setTimeout((function(){return y(null)}),3e3)}))}}else j.update(t).then((function(e){c(n.concat(e)),y({status:"confirmation",message:"Added ".concat(t.name)}),setTimeout((function(){return y(null)}),5e3)}))}}),Object(b.jsx)(h,{persons:n,filter:N,handleDelete:function(e,t){window.confirm("Do you want to delete ".concat(t.name))&&j.remove(t.id).then(c(n.filter((function(e){return e.id!==t.id}))))}})]})};n(41);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e5b63144.chunk.js.map