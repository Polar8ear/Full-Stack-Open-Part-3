{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["URL","persons","getAll","axios","get","then","response","data","addPerson","newPerson","post","remove","id","delete","changePhoneNum","changedPerson","put","Filter","filter","setFilter","value","onChange","event","target","PersonsForm","setPersons","newName","setNewName","newNumber","setNewNumber","handleSubmit","onSubmit","type","Details","handleDelete","personsToShow","person","name","toUpperCase","includes","map","number","onClick","Message","notification","className","status","message","App","useState","setNotification","useEffect","dataService","showNotification","seconds","setTimeout","preventDefault","some","window","confirm","existingPersonIndex","findIndex","copyPersons","catch","error","concat","existingPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f1e11124.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst URL=\"/api/persons\"\r\n\r\n\r\nconst getAll = () =>{\r\n    return axios.get(URL).then(response=>response.data)\r\n}\r\n\r\nconst addPerson = (newPerson) =>{\r\n    return axios.post(URL,newPerson)\r\n                .then(response=>response.data)\r\n}\r\n\r\nconst remove = (id) =>{\r\n    return axios.delete(`${URL}/${id}`).then(response=>response.data)\r\n}\r\n\r\nconst changePhoneNum = (id,changedPerson) =>{\r\n    return axios.put(`${URL}/${id}`,changedPerson).then(response=>response.data)\r\n\r\n}\r\n\r\nconst persons={getAll,addPerson,remove,changePhoneNum}\r\n\r\nexport default persons","import React, { useEffect,useState } from 'react'\nimport dataService from \"./services/persons\"\n\nconst Filter = ({filter,setFilter}) => {\n  return(\n    <form>\n        <div>\n            filter: <input value={filter} onChange={(event)=>setFilter(event.target.value)} />\n        </div>\n      </form>\n  )\n}\n\nconst PersonsForm = ({persons,setPersons,newName,setNewName,newNumber,setNewNumber,handleSubmit}) =>{  \n\n  return(\n    <div>\n      <h3>Add a new</h3>\n\n      <form onSubmit={handleSubmit}>\n        <div>\n          name: <input value={newName} onChange={(event)=>setNewName(event.target.value)} />\n        </div>\n\n        <div>\n          number: <input value={newNumber} onChange={(event)=>setNewNumber(event.target.value)} />\n        </div>\n        \n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Details = ({persons,filter,handleDelete}) =>{\n  const personsToShow = !filter\n  ? persons\n  : persons.filter((person)=>{\n  return(\n          person.name.toUpperCase().includes(filter.toUpperCase())\n          )\n        }\n      )\n  \n  \n  const showDetails = (person) => {\n    if(person){\n      return(\n        <div key={person.name}>\n          {person.name} {person.number} <button onClick={(event)=>handleDelete(event,person)}>Delete</button>\n        </div>\n      )\n    }\n    return null\n  }\n\n  return(\n    <div>\n      <h3>Number</h3>\n      {personsToShow.map(showDetails)}\n    </div>\n  )\n}\n\nconst Message = ({notification}) =>{\n  if(notification===null){\n    return null\n  }\n  return(\n    <div className={`message ${notification.status}`}>{notification.message}</div>\n  )\n}\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  useEffect(()=>{\n    dataService.getAll()\n         .then(data=>setPersons(data))\n  },[])\n\n  const showNotification = (status,message,seconds) =>{\n    setNotification({status,message})\n    setTimeout(() => {\n      setNotification(null)\n    }, seconds);\n  }\n\n  const addNewPerson = (event) =>{\n    event.preventDefault()\n    const newPerson ={name:newName,number:newNumber}\n    setNewName(\"\")\n    setNewNumber(\"\")\n    if(!persons.some((person)=>newPerson.name.toUpperCase()===person.name.toUpperCase())){\n      dataService.addPerson(newPerson)\n                 .then(data=>{\n                      setPersons(persons.concat(data))\n                      showNotification('confirmation',`Added ${data.name}`,3000)\n                 })\n                 .catch(error=>{\n                        showNotification('error',error.response.data.error,3000)\n                 })       \n    } \n    else if(window.confirm(`${newPerson.name} is already added to the phonebook, replace the old number with a new one?`)){\n        const existingPersonIndex = persons.findIndex(person=>person.name.toUpperCase()===newName.toUpperCase())\n        const copyPersons=[...persons]\n        dataService.changePhoneNum(persons[existingPersonIndex].id,newPerson)\n                  .then(data=>{\n                    copyPersons[existingPersonIndex]=data\n                    setPersons(copyPersons)\n                    showNotification('confirmation',`Changed ${newPerson.name}'s number`,3000)\n                  })\n                  .catch(error=>{\n                    showNotification('error',error.response.data.error,3000)\n                  })\n    }\n  }\n\n  const handleDelete = (event,person) =>{\n    event.preventDefault()\n    if(window.confirm(`Do you want to delete ${person.name}`)){\n      dataService.remove(person.id)\n                 .then( setPersons(persons.filter(existingPerson=>existingPerson.id!==person.id) ) )\n                 .catch(error=>showNotification('error',error.response.data.error,3000))\n    }\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message notification={notification}/>\n      <Filter filter={filter} setFilter={setFilter}/>\n\n      <PersonsForm persons={persons} setPersons={setPersons} \n               newName={newName} setNewName={setNewName} \n               newNumber={newNumber} setNewNumber={setNewNumber}\n               handleSubmit={addNewPerson}/>\n\n      <Details persons={persons} filter={filter} handleDelete={handleDelete}/>\n      \n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}